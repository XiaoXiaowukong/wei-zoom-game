window.__require=function e(t,o,i){function n(c,r){if(!o[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!r&&u)return u(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var h=o[c]={exports:{}};t[c][0].call(h.exports,function(e){return n(t[c][1][e]||e)},h,h.exports,e,t,o,i)}return o[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<i.length;c++)n(i[c]);return n}({Card:[function(e,t,o){"use strict";cc._RF.push(t,"6463cgPkPVEQo0E6ZQqoQmB","Card"),cc.Class({extends:cc.Component,properties:{cardLayout:cc.Layout,backSprite:cc.Sprite,frontSprite:cc.Sprite},onLoad:function(){this.status=0},resetCardSprite:function(e){console.log("pukerIndex",e),backUrl="/textures/common/puker/puker2";var t=this;cc.loader.loadRes(backUrl,cc.SpriteAtlas,function(o,i){var n=i.getSpriteFrame(e);t.frontSprite.spriteFrame=n})},hideFront:function(){this.frontSprite.node.active=!1},showFront:function(){this.frontSprite.node.active=!0},start:function(){}}),cc._RF.pop()},{}],Desk:[function(e,t,o){"use strict";cc._RF.push(t,"023bezT++9MSoXjxViBh3ef","Desk"),cc.Class({extends:cc.Component,properties:{deskSetLayout:cc.Layout,backLayout:cc.Layout,mypukerLayout:cc.Layout,startPushPuker:cc.Sprite,starPrefab:cc.Prefab,chuPaiLayout:cc.Layout},onLoad:function(){this.cardNumber=[],this.allCardsNods=[],this.myCardNodes=[],this.mySelectCards=[],this.singelPukerW=100,this.singelPukerH=200,this.myPukerCenterPosition=cc.v2,this.deskSetLayout.node.getChildByName("back").on(cc.Node.EventType.MOUSE_DOWN,this.backHomeDownListener,this),this.startPushPuker.node.on(cc.Node.EventType.MOUSE_UP,this.startPushPukerListener,this),this.chuPaiLayout.node.on(cc.Node.EventType.MOUSE_UP,this.chupaiListener,this),this.initCardNumber(),this.init()},initCardNumber:function(){var e=["1","2","3","4","5","6","7","8","9","10","J","Q","K"],t=["1","2","3","4"];for(i=0;i<e.length;i++)for(j=0;j<t.length;j++)this.cardNumber.push(e[i]+t[j]);this.randomNumber=this.randomilize(this.cardNumber)},randomilize:function(e){for(var t=e.length,o=new Array,i=0;i<t;i++)o[i]=i;var n=new Array;for(i=0;i<t;i++)n[i]=o.splice(Math.floor(Math.random()*o.length),1);var s=new Array;for(i=0;i<t;i++)s[i]=e[n[i]];return s},init:function(){this.myPukerCenterPosition=this.mypukerLayout.node.getPosition(),this.myPukerW=this.mypukerLayout.node._contentSize.width,this.myPukerH=this.mypukerLayout.node._contentSize.height,console.log("\u81ea\u5df1\u653e\u724c\u533a\u57df\u7684\u4e2d\u5fc3,\u5bbd\u9ad8"+this.myPukerCenterPosition,this.myPukerW,this.myPukerH);for(i=0;i<10;i++){var e=cc.instantiate(this.starPrefab);console.log("\u65b9\u6cd5",e.getComponent("Card")),e.getComponent("Card").resetCardSprite(this.randomNumber[i]),e.getComponent("Card").hideFront(),this.backLayout.node.addChild(e),this.myCardNodes.push(e),e.setPosition(cc.v2(5*i,0))}this.pushPuker(),this.setOnclickToPuker()},setOnclickToPuker:function(){var e=this;for(this.isMove=!1,i=0;i<this.myCardNodes.length;i++)this.myCardNodes[i].on(cc.Node.EventType.MOUSE_UP,function(t){e.isMove=!1,console.log("\u539f\u59cb",t.target.y),t.target.y>=this.myPukerCenterPosition.y+15?(cc.log("%%%%%%%%%\u53d1\u9001\u6253\u724c"),t.target.y=this.myPukerCenterPosition.y):t.target.y=this.myPukerCenterPosition.y+15},this)},pukerOnclicklistenter:function(e){console.log("\u70b9\u51fb\u6bcf\u4e00\u5f20\u724c"),console.log(e),console.log(e._prevX),console.log(e._prevY),cardPosition=this.myCardNodes[1].getPosition(),console.log("cardPosition",cardPosition);var t=cc.moveTo(.1,cc.v2(cardPosition.x,cardPosition.y+20));this.myCardNodes[1].runAction(t)},getWH:function(){scenceWidth=this.deskSetLayout.node._contentSize.width,scenceHeight=this.deskSetLayout.node._contentSize.height,console.log(scenceWidth),console.log(scenceHeight)},pushPuker:function(){for(console.log("\u53d1\u724c\u52a8\u753b"),i=0;i<this.myCardNodes.length;i++){var e=cc.sequence(cc.delayTime(i/5),cc.moveTo(.5,cc.v2(this.myPukerCenterPosition.x-this.myPukerW/2+50*i,this.myPukerCenterPosition.y)),cc.callFunc(this.callbackActionEnd.bind(this,i)));this.myCardNodes[i].runAction(e)}},callbackActionEnd:function(e){console.log("\u6267\u884c\u7ed3\u675f",e),e==this.myCardNodes.length-1&&this.flipCard()},flipCard:function(){for(console.log("\u5f00\u59cb\u7ffb\u8f6c"),i=0;i<this.myCardNodes.length;i++)this.myCardNodes[i].getComponent("Card").showFront()},startPushPukerListener:function(e){console.log("\u5f00\u59cb\u53d1\u724c"),this.pushPuker()},backHomeDownListener:function(e){cc.director.loadScene("Home")},chupaiListener:function(e){for(this.mySelectCards=[],console.log("\u51fa\u724c"),i=0;i<this.myCardNodes.length;i++)console.log(this.myCardNodes[i].getPosition()),console.log(this.myCardNodes[i].getPosition().y),console.log(this.myPukerCenterPosition.y),this.myCardNodes[i].getPosition().y>this.myPukerCenterPosition.y&&this.mySelectCards.push(this.myCardNodes[i]);var t=this.mySelectCards.length,o=t/2*-50;for(console.log("selectLength",t),console.log("startX",o),j=0;j<this.mySelectCards.length;j++)console.log(this.mySelectCards[j]),this.mySelectCards[j].setPosition(cc.v2(o- -50*j,this.myPukerCenterPosition.y+this.myPukerH))},start:function(){this.getWH()}}),cc._RF.pop()},{}],Home:[function(e,t,o){"use strict";cc._RF.push(t,"f59cdiD2jhOZq+Fh6o1ao0Y","Home"),cc.Class({extends:cc.Component,properties:{createSprite:{default:null,type:cc.Node},joinSprite:{default:null,type:cc.Node},selectLayout:{default:null,type:cc.Node}},onLoad:function(){this.selectLayout.active=!1,this.selectLayout.getChildByName("back").on(cc.Node.EventType.MOUSE_DOWN,this.backCloseDownListener,this),this.createSprite.on(cc.Node.EventType.MOUSE_DOWN,this.createDownListener,this),this.joinSprite.on(cc.Node.EventType.MOUSE_DOWN,this.joinDownListener,this)},createDownListener:function(e){console.log("create home"),this.selectLayout.active=!0},joinDownListener:function(e){console.log("join home")},backCloseDownListener:function(e){console.log("close"),this.selectLayout.active=!1},selectMJDownListenter:function(e){cc.director.loadScene("Desk")},selectPKDownListenter:function(e){cc.director.loadScene("Desk")},start:function(){}}),cc._RF.pop()},{}],Login:[function(e,t,o){"use strict";cc._RF.push(t,"419caCL7bNFi6A3lgDMyjzv","Login"),cc.Class({extends:cc.Component,properties:{wechatButton:{default:null,type:cc.Node},guestButton:{default:null,type:cc.Node}},onLoad:function(){this.wechatButton.on("click",this.wechatLogin,this),this.guestButton.on("click",this.guestLogin,this)},wechatLogin:function(){cc.director.loadScene("Home")},guestLogin:function(){cc.director.loadScene("Home")},start:function(){}}),cc._RF.pop()},{}],Start:[function(e,t,o){"use strict";cc._RF.push(t,"92fa7mTkohHtIOHnzA3lo94","Start"),cc.Class({extends:cc.Component,properties:{loadResource:{default:null,type:cc.ProgressBar},progressLabel:cc.Label},startGame:function(){this.loadResource.progress=null,cc.director.loadScene("Login")},onLoad:function(){},start:function(){var e=this;console.log("123"+this.progressLabel),this.progressLabel.string="0%",this.loadResource.progress=0,cc.director.preloadScene("Login",function(t,o,i){var n=t/o;e.loadResource.progress=n,e.progressLabel.string=parseInt(100*n)+"%",console.log(e.progressLabel.string)},function(){console.log("\u52a0\u8f7d\u5b8c\u6210..."),e.startGame()})}}),cc._RF.pop()},{}]},{},["Card","Desk","Home","Login","Start"]);